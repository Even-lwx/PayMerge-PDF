# 发票合并工具 v5.0 - 命名规则更新

## 🔄 最新更新

### 文件命名规则简化 (2025-09-26)

**旧格式：** `日期_销售方_金额_发票号后4位_已合并.pdf`
**新格式：** `日期_金额_发票号后4位_已合并.pdf`

### ✨ 更新内容

1. **去掉销售方信息**
   - 简化文件名，避免销售方名称过长
   - 减少特殊字符和空格问题
   - 提高文件名的可读性

2. **保留核心信息**
   - ✅ 开票日期（格式：YYYYMMDD）
   - ✅ 发票金额（格式：XXX元，自动去掉.00）
   - ✅ 发票号后4位（格式：#XXXX）

### 📝 命名示例

| 发票信息 | 生成的文件名 |
|---------|-------------|
| 2025-09-26, ¥199.00, 发票号12345678 | `20250926_199元_#5678_已合并.pdf` |
| 2025-12-31, ¥355.50, 发票号98765432 | `20251231_355.50元_#5432_已合并.pdf` |
| 缺少日期, ¥100.00, 发票号11112222 | `100元_#2222_已合并.pdf` |
| 数据不完整 | `原文件名_已合并.pdf` |

### 🔧 技术细节

- **整数金额优化**：100.00元 → 100元
- **日期格式统一**：2025-09-26 → 20250926
- **发票号处理**：取最后4位数字，前缀#
- **容错处理**：数据缺失时使用原文件名

### 📦 影响的文件版本

- ✅ `invoice_merger_v5.py` - 主要版本
- ✅ `invoice_merger_v5_stable.py` - 稳定版本
- 📊 CSV汇总记录功能不受影响

### 🚀 使用方法

1. 运行程序：`python invoice_merger_v5_stable.py`
2. 拖放或选择：1个PDF + 2张图片
3. 点击【提取数据】获取发票信息
4. 点击【智能合并】生成最终文件

新的命名规则将自动应用到生成的合并文件中！